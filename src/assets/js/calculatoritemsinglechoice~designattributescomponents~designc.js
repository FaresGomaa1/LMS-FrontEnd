(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"3D8H":function(t,i,e){"use strict";e("TWNs"),e("rB9j"),e("JfAA"),e("ToJy"),e("SYor");var n=e("NRfZ"),o=e("qiRQ"),s=e("ttAG"),a=e("mSNy"),c=new RegExp("^"+a.default.t("option",{number:null})+"\\d");i.a={props:["questionModel","actions","isCalculator"],data:()=>({actionsMap:{},isDragging:!1,keyFlag:!0}),created:function(){this.mapActions()},methods:{changeOption:function(t,i){i.length>n.a.maxChoiceTextLimit&&(this.$swal({title:this.$t("warning"),icon:"warning",text:this.$t("popups.maxChoiceLength.text",{maxChoiceLength:n.a.maxChoiceTextLimit}),confirmButtonText:"OK"}),i=i.slice(0,n.a.maxChoiceTextLimit)),i=this.fixOptionText(i),this.$set(t,"text",i)},isLengthValid:function(t){return!(t.length>n.a.maxChoiceTextLimit)},getCalculatorActionValue:function(t){if(this.actions&&this.actions.length>0){var i=this.actions.find(i=>i.answer===t);if(i)return i.value}return 0},addScore:function(t,i,e){this.$emit("addNewScore",t,i,e)},mapActions:function(){var t=this;if(this.actions){for(var i=function(i){var e=t.actions.find(e=>e.answer===t.questionModel.choice.options[i]._id);e&&e.value?"increase"===e.command?t.$set(t.actionsMap,e.answer,e.value):"decrease"===e.command&&t.$set(t.actionsMap,e.answer,-1*e.value):t.$set(t.actionsMap,t.questionModel.choice.options[i]._id,0)},e=0;e<this.questionModel.choice.options.length;e++)i(e);var n=this.actions.find(t=>"other"===t.answer);n?this.$set(this.actionsMap,"other",n.value):this.$set(this.actionsMap,"other",0)}},changeScore:function(t,i){this.actionsMap[t]!==i&&(i=Number(i),this.actionsMap[t]=i,this.$emit("addScore",this.questionModel._id,t,i))},randomOrder:function(t){return t.sort(()=>Math.random()-.5)},editInput:function(t,i,e){c.test(t)&&s.default.selectAllText(e.target)},onKeydown:function(t,i,e){13!==e.keyCode||e.altKey||e.shiftKey||(e.preventDefault(),this.$emit("addChoice",i,this.$refs)),8===e.keyCode&&0===t.text.length&&this.questionModel.choice.options.length>1&&this.keyFlag&&this.$emit("removeChoice",i,this.$refs),this.keyFlag=!1},onKeyup:function(){this.keyFlag=!0},onDrag:function(){this.isDragging=!0,"activeElement"in document&&(document.body.classList.add("grabbing"),document.activeElement.blur())},onDrop:function(t,i){o.a.move(this.questionModel.choice.options,t,i),this.isDragging=!1,document.body.classList.remove("grabbing")},fixOptionText:function(t){for(var i=t,e=1;this.questionModel.choice.options.findIndex(t=>t.text===i)>-1;)i=t+" (".concat(e,")"),e++;return i},checkAndFixDuplicate:function(t,i){var e=t.trim();this.questionModel.choice.options.findIndex(t=>t.text.trim()===e.trim())!==i&&(t=this.fixOptionText(e),this.$set(this.questionModel.choice.options[i],"text",t))}}}}}]);