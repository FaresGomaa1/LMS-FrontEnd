<app-header></app-header>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="card p-4 shadow">
        <h2 class="text-center mb-4">Edit your Information</h2>
        <div class="mb-3">
            <label for="name" class="form-label">Name:</label>
            <input type="text" id="name" class="form-control" formControlName="name" />
            <div *ngIf="studentForm.get('name')?.invalid && (studentForm.get('name')?.dirty || studentForm.get('name')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('name')?.errors?.['required']">Name is required</div>
              <div *ngIf="studentForm.get('name')?.errors?.['minlength']">Name must be at least 3 characters long</div>
              <div *ngIf="studentForm.get('name')?.errors?.['pattern']">You need to Insert you First and Last Names</div>
            </div>
          </div>
  
          <div class="mb-3">
            <label for="age" class="form-label">Age:</label>
            <input type="number" id="age" class="form-control" formControlName="age" />
            <div *ngIf="studentForm.get('age')?.invalid && (studentForm.get('age')?.dirty || studentForm.get('age')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('age')?.errors?.['required']">Age is required</div>
              <div *ngIf="studentForm.get('age')?.errors?.['min']">Age must be at least 18</div>
            </div>
          </div>

          <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input type="text" id="title" class="form-control" formControlName="title" />
            <div *ngIf="studentForm.get('title')?.invalid && (studentForm.get('title')?.dirty || studentForm.get('title')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('title')?.errors?.['required']">Title is required</div>
              <div *ngIf="studentForm.get('title')?.errors?.['minlength']">Title must be at least 4 characters long</div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="phone" class="form-label">Phone:</label>
            <input type="text" id="phone" class="form-control" formControlName="phone" />
            <div *ngIf="studentForm.get('phone')?.invalid && (studentForm.get('phone')?.dirty || studentForm.get('phone')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('phone')?.errors?.['required']">Phone is required</div>
              <div *ngIf="studentForm.get('phone')?.errors?.['minlength']">Phone must be at least 11 digits long</div>
              <div *ngIf="studentForm.get('phone')?.errors?.['maxlength']">Phone cannot exceed 11 digits</div>
              <div *ngIf="studentForm.get('phone')?.errors?.['pattern']">Invalid phone number format</div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="address" class="form-label">Address:</label>
            <input type="text" id="address" class="form-control" formControlName="address" />
            <div *ngIf="studentForm.get('address')?.invalid && (studentForm.get('address')?.dirty || studentForm.get('address')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('address')?.errors?.['required']">Address is required</div>
              <div *ngIf="studentForm.get('address')?.errors?.['minlength']">Address must be at least 5 characters long</div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="ssn" class="form-label">SSN:</label>
            <input type="text" id="ssn" class="form-control" formControlName="ssn" />
            <div *ngIf="studentForm.get('ssn')?.invalid && (studentForm.get('ssn')?.dirty || studentForm.get('ssn')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('ssn')?.errors?.['required']">SSN is required</div>
              <div *ngIf="studentForm.get('ssn')?.errors?.['pattern']">Invalid SSN format</div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input type="email" id="email" class="form-control" formControlName="email" />
            <div *ngIf="studentForm.get('email')?.invalid && (studentForm.get('email')?.dirty || studentForm.get('email')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('email')?.errors?.['required']">Email is required</div>
              <div *ngIf="studentForm.get('email')?.errors?.['email']">Invalid email format</div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="password" class="form-label">Password:</label>
            <input type="password" id="password" class="form-control" formControlName="password" />
            <div *ngIf="studentForm.get('password')?.invalid && (studentForm.get('password')?.dirty || studentForm.get('password')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('password')?.errors?.['required']">Password is required</div>
              <div *ngIf="studentForm.get('password')?.errors?.['minlength']">Password must be at least 8 characters long</div>
              <div *ngIf="studentForm.get('password')?.errors?.['pattern']">Password must contain at least one uppercase letter, one lowercase letter, and one number</div>
            </div>
          </div>
          <div class="mb-3">
            <label for="confirmPassword" class="form-label">Confirm Password:</label>
            <input type="password" id="confirmPassword" class="form-control" (input)="comparePassword()" />
            <div *ngIf="!checkConfirmedPassword" class="alert alert-danger mt-2">
              Passwords do not match
            </div>
          </div>          
          <div class="mb-3">
            <label for="userAttachment" class="form-label">Select Attachment:</label>
            <input
              type="file"
              id="userAttachment"
              class="form-control"
              (change)="onFileSelected($event)"
              accept=".jpg,.jpeg,.png"
              formControlName="imageFile"
            />
            <div *ngIf="studentForm.get('imageFile')?.invalid && (studentForm.get('imageFile')?.dirty || studentForm.get('imageFile')?.touched)" class="alert alert-danger mt-2">
              <div *ngIf="studentForm.get('imageFile')?.errors?.['required']">Attachment is required</div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block" [disabled]="studentForm.invalid || !checkConfirmedPassword">
            <i class="fas fa-save"></i> Edit
          </button>          
      </form>
    </div>
  </div>
</div>

<app-footer></app-footer>
